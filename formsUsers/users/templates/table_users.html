{% load static %}
<!DOCTYPE html>
<html>
    <link rel="stylesheet" href="{% static 'modal_user.css' %}">

    <style>
      div.table_menu {
      color: blue;
      }
      table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      }
      th {
      text-align: left;
      }
      table {
        border-spacing: 5px;
      }
      .gray {
      background-color: gray;
      }
      .pink {
      background-color: pink;
      }
</style>
<body>
<h1>{{ title }}</h1>
    {% if message %}
        <p>{{ message }}</p>
    {% endif %}
<div class="table_menu" style="margin: 10px;">
    <button type="button" onclick="openModal()">Add user</button>
    <div id="myModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        {% include 'user_detail.html' %}

      </div>
    </div>
</div>
<table style="width:50%">
    <tr style="color: lightblue;">
        <td>Num</td>
        <td>ID</td>
        <td>Firstname</td>
        <td>Lastname</td>
        <td>Age</td>
        <td>Email</td>
        <td>Language</td>
    </tr>
    {% if users %}
      {% for key, user in users.items %}
    <tr class="{% cycle 'gray' 'pink' %}">
      <!-- forloop.counter виводить номер рядка -->
      <td style="color: lightblue">{{ forloop.counter }}</td>
      <td>{{ key|default:"None" }}</td>

      <td>{{ user.firstname|default:"None" }}</td>
      <td>{{ user.lastname|default:"None" }}</td>
      <td>{{ user.age|default:"None" }}</td>
      <td>{{ user.email|default:"None" }}</td>
      <td>{{ user.language }}</td>
      <td>
          <button type="button" onclick="editUser('{{ key }}')">Edit</button>

      </td>
      <td>
          <a href="{% url 'delete_user' key %}">Del</a>

      </td>

    </tr>
        {% empty %}
        <p>Немає даних</p>
        {% endfor %}

        {% else %}
        <p style="color: green;" >Немає ще даних</p>
        {% endif %}
</table>
  <!-- Модальне вікно для редагування даних користувача -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h4 style="color: lightblue;" id="editUserTitle"></h4>
            {% include 'user_edit.html' %}
        </div>
    </div>
{{ users|json_script:"users-data" }}

<script>
    const allUsers = JSON.parse(document.getElementById('users-data').textContent);
</script>

<script src="/static/modal_user.js"></script>

</body>
</html>