{% extends "master.html" %}

{% block title %}
{{ title }}
{% endblock %}

{% block content %}
<p>{{ message }}</p>
{% if messages %}
    <ul class="messages" style="color=lightblue">
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}

<form action="{% url 'receive_books' %}" method="post">
    {% csrf_token %}
    <h3 style="color: lightblue;">Видача книжок читачам</h3>

<div style="display: flex; justify-content: space-around;">
  <div style="height: 400px; width: 48%; overflow: auto; border: 1px solid black; padding: 5px;">
    <table style="width: 95%">
      <thead>
        <tr>
          <td></td>
          <td>ID</td>
          <td>First name</td>
          <td>Last name</td>
          <td>Email</td>
        </tr>
      </thead>
        {% if users %}
      <tbody>
        {% for user in users %}
        <tr class="{% cycle 'gray' 'pink' %}" id="row-{{ user.id }}">
          <td><input type="radio" name="select_user" value="{{ user.id }}"></td>
          <td>{{ user.id }}</td>
          <td>{{ user.firstname }}</td>
          <td>{{ user.lastname }}</td>
            <td><a href="{% url 'user_books' user.id %}">{{ user.account__email }}</a></td>
        </tr>
        {% endfor %}
      </tbody>
      {% endif %}
    </table>
  </div>
  <div style="height: 400px; width: 48%; overflow: auto; border: 1px solid black; padding: 5px;">
    <table style="width: 95%">
      <thead>
        <tr>
          <th></th>
          <th>ID</th>
          <th>Title</th>
          <th>Author</th>
          <th>Year</th>
          <th>Genre</th>
          <th>Date received</th>
          <th>Date returned</th>
        </tr>
      </thead>
        {% if books %}
      <tbody>
          {% for book in books %}
        <tr class="{% cycle 'gray' 'pink' %}" id="row-{{ book.id }}">
          <td><input type="checkbox" name="select_book" value="{{ book.id }}"></td>
          <td>{{ book.id }}</td>
          <td>{{ book.title }}</td>
          <td>{{ book.author }}</td>
          <td>{{ book.year }}</td>
          <td>{{ book.genre__name }}</td>
          <td>{{ book.borrows__date_received }}</td>
          <td>{{ book.borrows__date_returned }}</td>
        </tr>
          {% empty %}
          <p>Немає даних</p>
          {% endfor %}
      </tbody>
        {% else %}
        <p style="color: green;" >Немає ще даних</p>
        {% endif %}
    </table>
  </div>

</div>
    <button type="submit">Apply</button>
</form>
{% endblock content %}