{% extends "master.html" %}

{% block title %}
{{ title }}
{% endblock %}

{% block content %}
{% if messages %}
    <ul class="messages" style="color=lightblue">
        {% for message in messages %}
        <li {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}
    <div class="table_menu" style="margin: 10px;">
        <button type="button" onclick="openModal()">Add user</button>
        <div id="myModal" class="modal">
          <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            {% include 'userModal.html' %}

          </div>
        </div>
    </div>
    <table style="width:80%">
        <tr style="color: lightblue;font-size: 24px">
            <td>Num</td>
            <td>ID</td>
            <td>Firstname</td>
            <td>Lastname</td>
            <td>Age</td>
            <td>Email</td>
            <td>Login</td>
            <td>Password</td>
            <td>Phone number</td>
        </tr>
        {% if users %}
          {% for user in users %}
        <tr class="{% cycle 'gray' 'pink' %}">
          <!-- forloop.counter виводить номер рядка -->
          <td style="color: lightblue">{{ forloop.counter }}</td>
          <td>{{ user.id }}</td>

          <td>{{ user.firstname }}</td>
          <td>{{ user.lastname }}</td>
          <td>{{ user.age }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.login }}</td>
          <td>{{ user.password }}</td>
          <td>{{ user.phone }}</td>
          <td>
              <button type="button" onclick="editUser('{{ user.id }}')">Edit</button>
          </td>
            {% comment %}
          <td>
              <a href="{% url 'delete_user' user.id %}">Del</a>

          </td>
            {% endcomment %}
        </tr>
            {% empty %}
            <p>Немає даних</p>
            {% endfor %}

            {% else %}
            <p style="color: green;" >Немає ще даних</p>
            {% endif %}
    </table>
    <!-- Модальне вікно для редагування даних користувача -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h4 style="color: lightblue;" id="editUserTitle"></h4>
            {% include 'userModal.html' %}
        </div>
    </div>
{% comment %}
{{ users|json_script:"users-data" }}
{% endcomment %}

<script>
    const allUsers = JSON.parse(document.getElementById('users-data').textContent);
</script>

<script src="/static/modal_user.js"></script>

{% endblock content %}